{
"keyFields" : ["body.uniqueSectionCode", "body.schoolId"],
"references" :
 [
    {
     "fieldPath" : "body.schoolId",
     "ref" : {
            "collectionName" : "school",
            "choiceOfFields" :
                [ [
                       {
                       "path" : "metaData.externalId",
                       "values" :
                         [ { "valueSource" : "body.schoolId" } ]
                        }
                  ] ]
            }
     },
    {
    "fieldPath" : "body.ssaId" ,
    "ref" : {
              "collectionName" : "schoolSessionAssociation",
              "choiceOfFields" :
               [ [
                   {
                     "path" : "body.schoolId",
                     "values" :
                       [ { "valueSource" : "body.schoolId"  } ]
                     },
                     {
                       "path" : "body.sessionId",
                       "values" :
                         [ {
                             "ref" :
                             {
                     		     "collectionName" : "session",
                     		     "choiceOfFields" :
                     		  	  [
                     		  	    [
                     		  	       {
                     		  	          "path" : "body.schoolYear",
                     		  	          "values" :
                     		  	           [ { "valueSource" : "body.sessionReference.SchoolYear" } ]
                     		  	        },
                     		  	        {
                     		  	           "path" : "body.term",
                     		  	           "values" :
                     		  	           [ { "valueSource" : "body.sessionReference.Term" } ]
                     		  	        }
                     		  	      ],
                     		  	      [
                     		  	        {
                     		     	       "path" : "body.sessionName",
                     		  	           "values" :
                     		  	            [ { "valueSource" : "body.sessionReference.SessionName" } ]
                     		  	         }
                                       ]
                     		  	    ]
                                 }
                            }  ]
                     }
                ] ]
          }
       },
       {
         "fieldPath" : "body.schoolId_courseOffering",
         "ref" : {
             "collectionName" : "school",
             "choiceOfFields" :
             [ [
                 {
                   "path" : "metaData.externalId",
                   "values" :
                     [ { "valueSource" : "body.CourseOfferingReference.CourseOfferingIdentity.StateOrganizationId" } ]
                 }
             ] ]
         }
       },
       {
       "fieldPath" : "body.ssaId_courseOffering",
       "ref" : {
       		   "collectionName" : "schoolSessionAssociation",
               "choiceOfFields" :
               [ [
                   {
                     "path" : "body.schoolId",
                     "values" :
                       [ { "valueSource" : "body.schoolId_courseOffering"  } ]
                     },
                     {
                       "path" : "body.sessionId",
                       "values" :
                       [ {
                           "ref" :
                           {
                             "collectionName" : "session",
                             "choiceOfFields" :
                             [
                               [
                                 {
                                   "path" : "body.schoolYear",
                                   "values" :
                                     [ { "valueSource" : "body.CourseOfferingReference.CourseOfferingIdentity.SchoolYear" } ]
                                 },
                                 {
                                   "path" : "body.term",
                                   "values" :
                                     [ { "valueSource" : "body.CourseOfferingReference.CourseOfferingIdentity.Term" } ]
                                 }
                               ]
                             ]
                           }
                       } ]
                     }
                ] ]
          }
       }
    ]
}
