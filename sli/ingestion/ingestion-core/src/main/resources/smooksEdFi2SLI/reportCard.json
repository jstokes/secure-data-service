{
    "keyFields":["body.studentId", "body.gradingPeriodId"],
    "references":[
        {
            "fieldPath":"body.grades",
            "ref":{
                "entityType":"grade",
                "isRefList":true,
                "refObjectPath":"body.gradeReference",
                "choiceOfFields":[
                    [
                        {
                            "path":"body.studentSectionAssociationId",
                            "values":[
                                {
                                    "ref":{
                                        "entityType":"studentSectionAssociation",
                                        "isRefList":true,
                                        "refObjectPath":"body.gradeReference",
                                        "choiceOfFields":[
                                            [
                                                {
                                                    "path":"body.studentId",
                                                    "values":[
                                                        {
                                                            "ref":{
                                                                "entityType":"student",
                                                                "choiceOfFields":[
                                                                    [
                                                                        {
                                                                            "path":"body.studentUniqueStateId",
                                                                            "values":[
                                                                                {
                                                                                    "valueSource":"body.gradeReference.studentUniqueStateId"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "path":"body.sectionId",
                                                    "values":[
                                                        {
                                                            "ref":{
                                                                "entityType":"section",
                                                                "choiceOfFields":[
                                                                    [
                                                                        {
                                                                            "path":"body.uniqueSectionCode",
                                                                            "values":[
                                                                                {
                                                                                    "valueSource":"body.gradeReference.uniqueSectionCode"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            ]
                                        ]
                                    }
                                }
                            ]
                        }
                    ]
                ]
            }
        },

        {
            "fieldPath":"body.gradingPeriodId",
            "ref":{
                "entityType":"gradingPeriod",
                "choiceOfFields":[
                    [
                        {
                            "path":"body.gradingPeriodIdentity.schoolYear",
                            "values":[
                                {
                                    "valueSource":"body.gradingPeriodReference.schoolYear"
                                }
                            ]
                        },
                        {
                            "path":"body.gradingPeriodIdentity.gradingPeriod",
                            "values":[
                                {
                                    "valueSource":"body.gradingPeriodReference.gradingPeriod"
                                }
                            ]
                        },
                        {
                            "path":"body.gradingPeriodIdentity.schoolId",
                            "values":[
                                {
                                    "ref":{
                                        "entityType": "school",
                                        "choiceOfFields": [
                                            [
                                                {
                                                    "path" : "body.stateOrganizationId",
                                                    "values": [
                                                        {
                                                            "valueSource":"body.gradingPeriodReference.stateOrganizationId"
                                                        }
                                                    ]
                                                }
                                            ]
                                        ]
                                    }
                                }
                            ]
                        }
                    ]
                ]
            }
        },
        {
            "fieldPath":"body.studentId",
            "ref":{
                "entityType":"student",
                "takesContext":["edOrgs"],
                "choiceOfFields":[
                    [
                        {
                            "path":"body.studentUniqueStateId",
                            "values":[
                                {
                                    "valueSource":"body.studentId"
                                }
                            ]
                        }
                    ]
                ]
            }
        },
        {
            "fieldPath":"body.StudentCompetencyReference",
            "ref":{
                "entityType":"studentCompetency",
                "isRefList":true,
                "refObjectPath":"body.StudentCompetencyReference",
            	"optional" : true,
                "choiceOfFields":
				[
                    [
						{
							"path" : "body.learningObjectiveId",
							"values" :
							[{
					            "ref" :
					            {
					                "entityType" : "learningObjective",
					                "optional" : true,
					                "choiceOfFields" :
					                [
					                    [
					                       {
					                            "path" : "body.objective",
					                            "values" :
					                            [{
					                                "valueSource" : "body.StudentCompetencyReference.StudentCompetencyIdentity.LearningObjectiveReference.LearningObjectiveIdentity.Objective"
					                            }]
					                        },
					                       {
					                            "path" : "body.academicSubject",
					                            "values" :
					                            [{
					                                "valueSource" : "body.StudentCompetencyReference.StudentCompetencyIdentity.LearningObjectiveReference.LearningObjectiveIdentity.AcademicSubject"
					                            }]
					                        },
					                       {
					                            "path" : "body.objectiveGradeLevel",
					                            "values" :
					                            [{
					                                "valueSource" : "body.StudentCompetencyReference.StudentCompetencyIdentity.LearningObjectiveReference.LearningObjectiveIdentity.ObjectiveGradeLevel"
					                            }]
					                        }
					                    ]
					                ]
					            }
							}]
						},
						{
							"path" : "body.studentCompetencyObjectiveId",
							"values" :
							[{
					            "ref" :
					            {
					                "entityType" : "studentCompetencyObjective",
					                "optional" : true,
					                "choiceOfFields" :
					                [
					                    [
					                        {
					                            "path" : "body.studentCompetencyObjectiveId",
					                            "values" :
					                            [{
					                                "valueSource" : "body.StudentCompetencyReference.StudentCompetencyIdentity.StudentCompetencyObjectiveReference.StudentCompetencyObjectiveIdentity.StudentCompetencyObjectiveId"
					                            }]
					                        }
					                    ]
					                ]
					            }
							}]
						},
						{
							"path" : "body.competencyLevel.codeValue",
							"values" :
							[{
								"valueSource" : "body.StudentCompetencyReference.StudentCompetencyIdentity.CompetencyLevel.CodeValue"
							}]
						},
						{
				            "path" : "body.studentSectionAssociationId",
							"values" :
							[{
					            "ref" :
					            {
					                "entityType" : "studentSectionAssociation",
					                "takesContext" : ["edOrgs"],
					                "choiceOfFields" :
					                [
					                    [
					                        {
					                            "path" : "body.studentId",
					                            "values" :
					                            [{
					                                 "ref":
					                                 {
					                                     "entityType" : "student",
					                                     "choiceOfFields" :
					                                      [
					                                          [
					                                              {
					                                                  "path" : "body.studentUniqueStateId",
					                                                  "values" :
					                                                   [{
					                                                         "valueSource" : "body.StudentCompetencyReference.StudentCompetencyIdentity.StudentSectionAssociationReference.StudentSectionAssociationIdentity.StudentReference.StudentIdentity.StudentUniqueStateId"
					                                                   }]
					                                              }
					                                          ]
					                                      ]
					                                 }
					                            }]
					                        },
					                        {
					                            "path" : "body.sectionId",
					                            "values" :
					                             [{
					                                 "ref":
					                                 {
					                                     "entityType" : "section",
					                                     "choiceOfFields" :
					                                      [
					                                          [{
					                                              "path" : "body.uniqueSectionCode",
					                                              "values" :
					                                               [{
					                                                   "valueSource" : "body.StudentCompetencyReference.StudentCompetencyIdentity.StudentSectionAssociationReference.StudentSectionAssociationIdentity.SectionReference.SectionIdentity.UniqueSectionCode"
					                                               }]
					                                          }]
					                                      ]
					                                 }
					                             }]
					                        }
					                    ]
					                ]
					            }
							}]
						}
                	]
				]
        	}
    	}
	]
}