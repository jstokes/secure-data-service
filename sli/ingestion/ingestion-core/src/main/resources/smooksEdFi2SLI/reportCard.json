{
    "keyFields":["body.studentId", "body.gradingPeriodId"],
    "references":[
        {
            "fieldPath":"body.grades",
            "deprecated" : true,
            "ref":{
                "entityType":"grade",
                "isRefList":true,
                "refObjectPath":"body.gradeReference",
                "choiceOfFields":[
                    [
                        {
                            "path":"body.studentSectionAssociationId",
                            "values":[
                                {
                                    "ref":{
                                        "entityType":"studentSectionAssociation",
                                        "isRefList":true,
                                        "refObjectPath":"body.gradeReference",
                                        "choiceOfFields":[
                                            [
                                                {
                                                    "path":"body.studentId",
                                                    "values":[
                                                        {
                                                            "ref":{
                                                                "entityType":"student",
                                                                "choiceOfFields":[
                                                                    [
                                                                        {
                                                                            "path":"body.studentUniqueStateId",
                                                                            "values":[
                                                                                {
                                                                                    "valueSource":"body.gradeReference.studentUniqueStateId"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "path":"body.sectionId",
                                                    "values":[
                                                        {
                                                            "ref":{
                                                                "entityType":"section",
                                                                "choiceOfFields":[
                                                                    [
                                                                        {
                                                                            "path":"body.uniqueSectionCode",
                                                                            "values":[
                                                                                {
                                                                                    "valueSource":"body.gradeReference.uniqueSectionCode"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                ]
                                                            }
                                                        }
                                                    ]
                                                }
                                            ]
                                        ]
                                    }
                                }
                            ]
                        }
                    ]
                ]
            }
        },

        {
            "fieldPath":"body.GradingPeriodReference",
            "deprecated" : true,
            "ref":{
                "entityType":"gradingPeriod",
                "choiceOfFields":[
                    [
                        {
                            "path":"body.gradingPeriodIdentity.schoolYear",
                            "values":[
                                {
                                    "valueSource":"body.gradingPeriodReference.schoolYear"
                                }
                            ]
                        },
                        {
                            "path":"body.gradingPeriodIdentity.gradingPeriod",
                            "values":[
                                {
                                    "valueSource":"body.gradingPeriodReference.gradingPeriod"
                                }
                            ]
                        },
                        {
                            "path":"body.gradingPeriodIdentity.schoolId",
                            "values":[
                                {
                                    "ref":{
                                        "entityType": "school",
                                        "choiceOfFields": [
                                            [
                                                {
                                                    "path" : "body.stateOrganizationId",
                                                    "values": [
                                                        {
                                                            "valueSource":"body.gradingPeriodReference.stateOrganizationId"
                                                        }
                                                    ]
                                                }
                                            ]
                                        ]
                                    }
                                }
                            ]
                        }
                    ]
                ]
            }
        },
        {
            "fieldPath":"body.studentId",
            "ref":{
                "entityType":"student",
                "takesContext":["edOrgs"],
                "choiceOfFields":[
                    [
                        {
                            "path":"body.studentUniqueStateId",
                            "values":[
                                {
                                    "valueSource":"body.studentId"
                                }
                            ]
                        }
                    ]
                ]
            }
        },
        {
            "fieldPath":"body.studentCompetencyReference",
            "ref":{
                "entityType":"studentCompetency",
                "isRefList":true,
                "refObjectPath":"body.studentCompetencyReference",
                "choiceOfFields":[
                    [
                        {
                            "path":"metaData.externalId",
                            "values":[
                                {
                                    "valueSource":"body.studentCompetencyReference.studentCompetencyId"
                                }
                            ]
                        },
                        {
                            "path":"metaData.studentUniqueStateId",
                            "values":[
                                {
                                    "valueSource":"body.studentCompetencyReference.studentId"
                                }
                            ]
                        },
                        {
                            "path":"metaData.uniqueSectionCode",
                            "values":[
                                {
                                    "valueSource":"body.studentCompetencyReference.sectionId"
                                }
                            ]
                        }
                    ]
                ]
            }
        }
    ]
}