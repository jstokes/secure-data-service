{
    "keyFields" : [ "body.sessionId", "body.localCourseCode"],
    "complexReference" :
    {
        "fieldPath" : "body.courseId",
        "collectionName" : "course",
        "path" : "body.courseCode",
        "valueSource" : "body.courseCode",
        "complexFieldNames" : ["ID","identificationSystem","assigningOrganizationCode"]
    },
	"references" :
	[{
        "fieldPath" : "body.schoolId",
        "ref" :
        {
	        "collectionName" : "educationOrganization",
	        "choiceOfFields" :
	        [
	            [
		            { 
		           	    "path" : "body.stateOrganizationId",
		                "values" : 
		                [{
			                "valueSource" : "body.SchoolReference.EducationalOrgIdentity.StateOrganizationId"
		                }]
		            }
	            ]
	        ]
        }
    },
      {
         "fieldPath":"body.sessionId",
         "ref":
         {
            "collectionName":"session",
            "choiceOfFields":
            [
               [
                  {
                     "path":"body.schoolYear",
                     "values":
                     [{
                         "valueSource":"body.SessionReference.SessionIdentity.SchoolYear"
                     }]
                  },
                  {
                     "path":"body.term",
                     "values":
                     [{
                         "valueSource":"body.SessionReference.SessionIdentity.Term"
                     }]
                  },
                  {
                     "path":"body.sessionName",
                     "values":
                     [{
                         "valueSource":"body.SessionReference.SessionIdentity.SessionName"
                     }]
                  },
                  {
                     "path":"body.schoolId",
                     "values":
                     [
                        {
                           "ref":
                           {
                              "collectionName":"educationOrganization",
                              "choiceOfFields":
                              [
                                 [
                                    {
                                       "path":"body.stateOrganizationId",
                                       "values":
                                       [{
                                           "valueSource":"body.SchoolReference.EducationalOrgIdentity.StateOrganizationId"
                                       }]
                                    }
                                 ]
                              ]
                           }
                        }
                     ]
                  }
               ]
            ]
         }
      }]
}