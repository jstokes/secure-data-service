<?xml version="1.0" encoding="UTF-8"?>
<smooks-resource-list xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd"
                      xmlns:core="http://www.milyn.org/xsd/smooks/smooks-core-1.3.xsd"
                      xmlns:ftl="http://www.milyn.org/xsd/smooks/freemarker-1.1.xsd">
                      
    <core:filterSettings type="SAX" defaultSerialization="false" />
    <!--
    Create 2 NodeModels.  One high level model for the "order"
    (header etc) and then one per "order-item".
 
    These models are used in the FreeMarker templating resources
    defined below.  You need to make sure you set the selector such
    that the total memory footprint is as low as possible.  In this
    example, the "order" model will contain everything accept the
    <order-item> data (the main bulk of data in the message).  The
    "order-item" model only contains the current <order-item> data
    (i.e. there's max 1 order-item in memory at any one time).
    -->
    <resource-config selector="StudentSectionAssociation">
        <resource>org.milyn.delivery.DomModelCreator</resource>
    </resource-config>
   
 
    <!--
    Apply the first part of the template when we reach the start
    of the <order-items> element.  Apply the second part when we
    reach the end.
 
    Note the <?TEMPLATE-SPLIT-PI?> Processing Instruction in the
    template.  This tells Smooks where to split the template,
    resulting in the order-items being inserted at this point.
    -->
    <ftl:freemarker applyOnElement="StudentSectionAssociation">
        <ftl:template>
          <!--
            <StudentSectionAssociationReference>
                <StudentSectionAssociationIdentity>
                    <StudentIdentity>
                        <StudentUniqueStateId>
                            ${StudentSectionAssociation.StudentReference.StudentIdentity.StudentUniqueStateId }
                        </StudentUniqueStateId>
                    </StudentIdentity>
                    <SectionIdentity>
                        <UniqueSectionCode>
                            ${StudentSectionAssociation.SectionReference.SectionIdentity.UniqueSectionCode}
                        </UniqueSectionCode>
                    </SectionIdentity>
                </StudentSectionAssociationIdentity>
            </StudentSectionAssociationReference>
          -->
        </ftl:template>
    </ftl:freemarker>

</smooks-resource-list>