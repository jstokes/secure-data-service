<?xml version="1.0" encoding="iso-8859-1"?>
<setup>

	<import platforms = "db"/>

	<comment>set default values</comment>
	<setting name="database" default="sql_server" />

	<comment>import database specific properties</comment>
	<include uri="edfi.sql_server.properties" /> 

	<comment>echo the settings to the console</comment>
	<echo>{ftl: Database URL: ${dbUrl}}</echo>
	<echo>{ftl: JDBC URL: ${dbUrl}}</echo>
	<echo>{ftl: Username: ${dbUser}}</echo>
	
	<comment>define the database that will be referred by the id 'db' subsequently</comment>
	<database id="db" url="{dbUrl}" driver="{dbDriver}" catalog="{dbCatalog}" schema="{dbSchema}"
        	user="{dbUser}" password="{dbPassword}" />

	<comment>Clear the records in EducationOrganization table</comment>
	<execute target="db" onError="warn">
	DELETE FROM School 
	</execute>

	<comment>create Schools</comment>
	<generate type="School" count="100" consumer="db">
		<attribute name="SchoolId" source="db" selector="SELECT EducationOrganizationId FROM EducationOrganization WHERE NameOfInstitution like 'School_%'" cyclic="false"/>
<!--		<attribute name="LocalEducationAgencyId" mode="ignored" /> -->
		<attribute name="SchoolTypeId" values="'2'"/>
		<attribute name="CharterStatusTypeId" values="'2'"/>
		<attribute name="TitleIPartASchoolDesignationTypeId" values="'2'"/>
		<attribute name="MagnetSpecialProgramEmphasisSchoolTypeId" values="'2'"/>
		<attribute name="AdministrativeFundingControlTypeId" values="'2'"/>
    </generate>

</setup>

