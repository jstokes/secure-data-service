
<smooks-resource-list xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd"
	xmlns:core="http://www.milyn.org/xsd/smooks/smooks-core-1.4.xsd"
	xmlns:jb="http://www.milyn.org/xsd/smooks/javabean-1.3.xsd"
	xmlns:camel="http://www.milyn.org/xsd/smooks/camel-1.4.xsd" xmlns:csv="http://www.milyn.org/xsd/smooks/csv-1.2.xsd">

	<params>
		<param name="stream.filter.type">SAX</param>
		<param name="terminate.on.visitor.exception">false</param>
	</params>
<!-- missing ClassOf-->
	<csv:reader fields="AssociationId,$ignore$2,
	StudentUniqueStateId,$ignore$22,StateOrganizationId,$ignore$2,
	EntryDate,
	EntryGradeLevel,
	EntryType,
	RepeatGradeIndicator,
	SchoolChoiceTransfer,
	ExitWithdrawDate,
	ExitWithdrawType,$ignore$1,
	EducationalPlans_EducationalPlan,
	$ignore$+">
	</csv:reader>

	<!-- Student School Association mapping -->

	<jb:bean beanId="record" class="org.slc.sli.ingestion.NeutralRecord"
		createOnElement="csv-record">

		<!-- jb:value property="sourceId" data="" / -->
		<!-- jb:value property="jobId" data="" / -->
		<jb:expression property="recordType">'studentSchoolAssociation'</jb:expression>
		<jb:wiring property="attributes" beanIdRef="studentSchoolAssociationAttributes" />
		<jb:wiring property="localParentIds" beanIdRef="studentSchoolAssociationParentIds" />
	</jb:bean>

	<jb:bean beanId="studentSchoolAssociationParentIds" class="java.util.HashMap"
		createOnElement="csv-record">

		<jb:value property="Student" data="csv-record/StudentUniqueStateId" />
		<jb:value property="School" data="csv-record/StateOrganizationId" />
	</jb:bean>

	<jb:bean beanId="studentSchoolAssociationAttributes" class="java.util.HashMap"
      createOnElement="csv-record">

    <jb:value property="schoolId" data="csv-record/StateOrganizationId"/>
	<jb:value property="studentId" data="csv-record/StudentUniqueStateId"/>

    <!-- EntryDate -->
	<jb:value property="entryDate" data="csv-record/EntryDate" />

	<!-- EntryGradeLevel-->
	<jb:value property="entryGradeLevel" data="csv-record/EntryGradeLevel" />

	<!-- EntryType -->
	<jb:value property="entryType" data="csv-record/EntryType" />

	<!-- RepeatGradeIndicator -->
	<jb:value property="repeatGradeIndicator" data="csv-record/RepeatGradeIndicator"/>

	<!-- ClassOf
	<jb:value property="classOf" data="csv-record/ClassOf" />
	-->

	<!-- SchoolChoiceTransfer -->
	<jb:value property="schoolChoiceTransfer" data="csv-record/SchoolChoiceTransfer"/>

	<!-- exitWithdrawDate -->
	<jb:value property="exitWithdrawDate" data="csv-record/ExitWithdrawDate" />

	<!-- ExitWithdrawType -->
	<jb:value property="exitWithdrawType" data="csv-record/ExitWithdrawType" />

	<!-- EducationalPlans -->
	<jb:wiring property="educationalPlans" beanIdRef="educationalPlanItemTypeArray" />

  </jb:bean>

	<!-- EducationalPlanItemType -->
   <jb:bean beanId="educationalPlanItemTypeArray" class="java.util.ArrayList" createOnElement="educationalPlans">
	  		<jb:value data="csv-record/EducationalPlans_EducationalPlan" />
   </jb:bean>


</smooks-resource-list>
