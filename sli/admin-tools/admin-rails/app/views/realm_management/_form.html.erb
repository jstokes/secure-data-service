<%= form_for(@realm, :url => realm_management_path(@realm)) do |f| %>
  
  <% if @realm.errors.any? or @realm.idp.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@realm.errors.count + @realm.idp.errors.count, "error") %> prohibited this Realm from being saved:</h2>

      <ul>
      <% @realm.errors.full_messages.each do |msg| %>
        <li><%= msg.gsub /Uniqueidentifier/, "Realm Identifier" %></li>
      <% end %>
      <% @realm.idp.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>


    <div class = "field well">
       	<%= f.label :name, "Display Name" %> <br />
   	    <%= f.text_field :name, :size => 50 %>
    </div>

    <%= f.fields_for :idp, @realm.idp do |idp| %>
        <div class = "field well">
        		<%= idp.label :id, "IDP URL (URL that identifies the federated IDP)" %>  <br />
        		<%= idp.text_field :id, :size => 50 %>
        </div>

        <div class = "field well">
          <%= idp.label :redirectEndpoint, "Redirect Endpoint (URL where authentication requests are sent)" %><br />
          <%= idp.text_field :redirectEndpoint, :size => 50 %>
        </div>
    <% end %>

    <div class = "field well">
        <%= f.label :uniqueIdentifier, "Realm Identifier (Used for skipping the realm selection)" %> <br />
       	<%= f.text_field :uniqueIdentifier, :size => 50 %>
    </div>


  <div class="actions">
    <%= f.submit :value => "Save", :class=>"btn" %>
  </div>
<% end %>
