<?xml version="1.0" encoding="UTF-8" standalone="no"?>
                               <!-- Read This Before Executing Task -->
                               <!-- Read This Before Executing Task -->
                        <!--  Add the jsch-0.1.48.jar to the ant classpath  -->
                       <!--  in Eclipse Window/Preferences/Ant/Runtime/Ant,  -->
                               <!--  Home Entries â€“ Add external JARs. -->
<project default="create_run_jar" name="Create Runnable Jar for Project ExportTools with Jar-in-Jar Loader">

    <property name="host"         value="galvatron.slidev.org"/>
    <property name="username"     value="ldalgado"/>
    <property name="password"     value="$?Changed123"/>
    <property name="path"         value="/metroplex/testDataGeneration/demo/20120801/"/>

    <target name="create_run_jar">
        <jar destfile="TestDataGeneration.jar">
            <manifest>
                <attribute name="Main-Class" value="org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader"/>
                <attribute name="Rsrc-Main-Class" value="org.slc.sli.test.xmlgen.StateEdFiXmlGenerator"/>
                <attribute name="Class-Path" value="."/>
                <attribute name="Rsrc-Class-Path" value="./ jtds-1.2.5.jar log4j-1.2.16.jar 
                commons-codec-1.6.jar commons-io-2.2.jar commons-lang3-3.0.1.jar"/>
            </manifest>
            <zipfileset src="jar-in-jar-loader.zip"/>
            <zipfileset dir="lib" includes="jtds-1.2.5.jar"/>
            <fileset dir="bin"/>
            <zipfileset dir="lib" includes="log4j-1.2.16.jar"/>
            <zipfileset dir="lib" includes="commons-codec-1.6.jar"/>
            <zipfileset dir="lib" includes="commons-io-2.2.jar"/>
            <zipfileset dir="lib" includes="commons-lang3-3.0.1.jar"/>
        </jar>
        <sshexec host="${host}" username="${username}" password="${password}" 
        command="mkdir -p ${path}" trust = "true"/>
        
        <scp file="TestDataGeneration.jar" todir="${username}:${password}@${host}:${path}" trust="true"/>
        <scp file="start.sh" todir="${username}:${password}@${host}:${path}" trust="true"/>
        <scp todir="${username}:${password}@${host}:${path}" trust="true">
          <fileset dir=".">
              <include name = "database/**"></include>
          </fileset>
        </scp>
        <sshexec host="${host}" username="${username}" password="${password}" 
        command="mkdir -p ${path}/../../sli/domain/src/main/resources/edfiXsd/"
        trust = "true"/>
        
        <scp todir="${username}:${password}@${host}:${path}/../../sli/domain/src/main/resources/edfiXsd/" trust="true">
                  <fileset dir="../../sli/domain/src/main/resources/edfiXsd/" />
        </scp>
    	
    	
        <sshexec host="${host}" username="${username}" password="${password}" 
        command="mkdir -p ${path}/db-datagen-approach/ref-configurations/"
        trust = "true"/>
        
        <scp todir="${username}:${password}@${host}:${path}/db-datagen-approach/ref-configurations/" trust="true">
                  <fileset dir="db-datagen-approach/ref-configurations/" />
        </scp>


    </target>
</project>
